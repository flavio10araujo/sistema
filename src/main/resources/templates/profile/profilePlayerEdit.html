<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring4-4.dtd">
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorator="fragments/layoutMain">

<head>
	<style type="text/css">
        .mainbody{background:#f0f0f0}
	</style>
</head>

<body>
	
	<div layout:fragment="content">

		<div class="mainbody container-fluid">
		    
		    <div class="row">
		        
		        <div class="col-lg-3 col-md-3 hidden-sm hidden-xs">
		            <div class="panel panel-default">
		                <div class="panel-body">
		                    <h1 class="panel-title pull-left" style="font-size:30px;"><i class="fa fa-cogs" aria-hidden="true"></i> Configurações</h1>
		                </div>
		            </div>
		        </div>
		        
		        <div class="col-lg-9 col-md-9 col-sm-12 col-xs-12">
		            
		            <div class="panel panel-default">
		                <div class="panel-body">
		                    <h1 class="panel-title pull-left" style="font-size:30px">Meu perfil</h1>
		                </div>
		            </div>
		            
		            <form id="f_editProfile" th:object="${player}" th:action="@{/profile/player/update}" method="post" class="form-horizontal">
		            
		            	<input type="hidden" th:field="*{id}" />
		            
			            <div class="panel panel-default">
			                <div class="panel-body">
			                    <h3 class="panel-title pull-left">Seu nome</h3>
			                    <br /><br />
			                    
		                        <label for="First_name">Nome</label>
		                        <input type="text" class="form-control" th:field="*{name}" th:id="name" maxlength="25" />
		                        
		                        <label for="Last_name">Sobrenome</label>
	                       		<input type="text" class="form-control" th:field="*{lastName}" th:id="lastName" maxlength="25" />
	
			                </div>
			            </div>
		            
			            <div class="panel panel-default">
			                
			                <div class="panel-body">
			                    
			                    <h3 class="panel-title pull-left">Sua foto</h3>
			                    
			                    <br /><br />
			                    
			                    <div align="center">
			                        <div class="col-lg-6 col-md-6">
			                            <img class="img-thumbnail img-responsive" th:src="@{'https://www.gravatar.com/avatar/'+${player.emailMD5}+'.jpg?s=200'}" width="300px" height="300px" />
			                        </div>
			                        
			                        <div class="col-lg-6 col-md-6">
			                        	<small>
			                        		A Polifono.com utiliza o sistema Gravatar.com para mostrar as imagens dos perfis.
			                        		Portanto, para alterar sua imagem de perfil, acesse <a href="https://br.gravatar.com/" target="_blank">www.gravatar.com</a> utilizando 
			                        		o email <span th:text="${player.email}" style="font-weight:bold"></span> e altere a sua imagem de perfil universal por lá.
			                        		Ao fazer isso, sua imagem será alterada automaticamente na Polifono.com e em todos os demais sites que utilizam o sistema de imagens da Gravatar.com.
			                        	</small>
			                        </div>
			                    </div>
			                    
			                </div>
			                
			            </div>
		            
			            <div class="panel panel-default">
			                
			                <div class="panel-body">
			                    
			                    <h3 class="panel-title pull-left">Seu perfil</h3>
			                    
			                    <br /><br />
			                    
		                        <label>Quem sou</label>
		                        <textarea class="form-control" rows="3" th:field="*{about}" th:id="about" placeholder="Conte um pouco sobre você"></textarea>
			                    
			                    <br /><br />
		                        
		                        <label for="Your_location">Cidade</label>
		                        
		                        <input type="text" class="form-control" th:field="*{address}" th:id="address" placeholder="Informe sua cidade" required="true" />
		                        
		                        <br />
		                        
		                        <label for="Your_gender">Sexo</label>
		                        
		                        <select class="form-control" th:field="*{sex}" th:id="sex">
		    						<option value="0"></option>
		    						<option value="1" th:text="#{app.male}"></option>
		    						<option value="2" th:text="#{app.female}"></option>
		  						</select>
		                        
		                        <br />
		                        
		                        <label>Data de nascimento</label>
                        
		                        <div class="form-inline" id="birth-date">
		                            
		                            <select class="form-control" th:field="*{dtBirthDay}" th:id="dtBirthDay">
		                                <option value="-1">Dia</option>
		                                <option value="1">1</option>
		                                <option value="2">2</option>
		                                <option value="3">3</option>
		                                <option value="4">4</option>
		                                <option value="5">5</option>
		                                <option value="6">6</option>
		                                <option value="7">7</option>
		                                <option value="8">8</option>
		                                <option value="9">9</option>
		                                <option value="10">10</option>
		                                <option value="11">11</option>
		                                <option value="12">12</option>
		                                <option value="13">13</option>
		                                <option value="14">14</option>
		                                <option value="15">15</option>
		                                <option value="16">16</option>
		                                <option value="17">17</option>
		                                <option value="18">18</option>
		                                <option value="19">19</option>
		                                <option value="20">20</option>
		                                <option value="21">21</option>
		                                <option value="22">22</option>
		                                <option value="23">23</option>
		                                <option value="24">24</option>
		                                <option value="25">25</option>
		                                <option value="26">26</option>
		                                <option value="27">27</option>
		                                <option value="28">28</option>
		                                <option value="29">29</option>
		                                <option value="30">30</option>
		                                <option value="31">31</option>
		                            </select>
		                            
		                            <select class="form-control" th:field="*{dtBirthMonth}" th:id="dtBirthMonth">
		                                <option value="-1">Mês</option>
		                                <option value="0">Janeiro</option>
		                                <option value="1">Fevereiro</option>
		                                <option value="2">Março</option>
		                                <option value="3">Abril</option>
		                                <option value="4">Maio</option>
		                                <option value="5">Junho</option>
		                                <option value="6">Julho</option>
		                                <option value="7">Agosto</option>
		                                <option value="8">Setembro</option>
		                                <option value="9">Outubro</option>
		                                <option value="10">Novembro</option>
		                                <option value="11">Dezembro</option>
		                            </select>
		                            
		                            <select class="form-control" th:field="*{dtBirthYear}" th:id="dtBirthYear">
		                                <option value="-1">Ano</option>
		                                <option value="2012">2012</option>
		                                <option value="2011">2011</option>
		                                <option value="2010">2010</option>
		                                <option value="2009">2009</option>
		                                <option value="2008">2008</option>
		                                <option value="2007">2007</option>
		                                <option value="2006">2006</option>
		                                <option value="2005">2005</option>
		                                <option value="2004">2004</option>
		                                <option value="2003">2003</option>
		                                <option value="2002">2002</option>
		                                <option value="2001">2001</option>
		                                <option value="2000">2000</option>
		                                <option value="1999">1999</option>
		                                <option value="1998">1998</option>
		                                <option value="1997">1997</option>
		                                <option value="1996">1996</option>
		                                <option value="1995">1995</option>
		                                <option value="1994">1994</option>
		                                <option value="1993">1993</option>
		                                <option value="1992">1992</option>
		                                <option value="1991">1991</option>
		                                <option value="1990">1990</option>
		                                <option value="1989">1989</option>
		                                <option value="1988">1988</option>
		                                <option value="1987">1987</option>
		                                <option value="1986">1986</option>
		                                <option value="1985">1985</option>
		                                <option value="1984">1984</option>
		                                <option value="1983">1983</option>
		                                <option value="1982">1982</option>
		                                <option value="1981">1981</option>
		                                <option value="1980">1980</option>
		                                <option value="1979">1979</option>
		                                <option value="1978">1978</option>
		                                <option value="1977">1977</option>
		                                <option value="1976">1976</option>
		                                <option value="1975">1975</option>
		                                <option value="1974">1974</option>
		                                <option value="1973">1973</option>
		                                <option value="1972">1972</option>
		                                <option value="1971">1971</option>
		                                <option value="1970">1970</option>
		                                <option value="1969">1969</option>
		                                <option value="1968">1968</option>
		                                <option value="1967">1967</option>
		                                <option value="1966">1966</option>
		                                <option value="1965">1965</option>
		                                <option value="1964">1964</option>
		                                <option value="1963">1963</option>
		                                <option value="1962">1962</option>
		                                <option value="1961">1961</option>
		                                <option value="1960">1960</option>
		                                <option value="1959">1959</option>
		                                <option value="1958">1958</option>
		                                <option value="1957">1957</option>
		                                <option value="1956">1956</option>
		                                <option value="1955">1955</option>
		                                <option value="1954">1954</option>
		                                <option value="1953">1953</option>
		                                <option value="1952">1952</option>
		                                <option value="1951">1951</option>
		                                <option value="1950">1950</option>
		                                <option value="1949">1949</option>
		                                <option value="1948">1948</option>
                                        <option value="1947">1947</option>
                                        <option value="1946">1946</option>
                                        <option value="1945">1945</option>
                                        <option value="1944">1944</option>
		                            </select>

		                        </div>
		                    
			                    <br />
			                    
			                    <input type="hidden" th:field="*{dtBirthStr}" th:id="dtBirthStr" class="form-control" placeholder="DD/MM/AAAA" maxlength="10" />
			                    
			                    <a th:href="'javascript:cancelEdit(\'/profile/player/' + ${player.id} + '\')'" class="btn btn-default"><i class="fa fa-fw fa-times" aria-hidden="true"></i> Cancelar</a>
			                	
			                	<input onclick="javascript:submitFormEditProfile()" class="btn btn-primary pull-right" type="button" value="Salvar" />
		                    
		                	</div>
		                
		            	</div>
		            	
		            </form>

        		</div>
        		
    		</div>
    		
		</div>
		
		<input type="hidden" th:value="${message}" id="alertMessage" />
        <input type="hidden" th:value="${messageContent}" id="alertMessageContent" />
		
		<script th:inline="javascript">
			/*<![CDATA[*/
				if(document.getElementById("alertMessage").value=='error'){bootbox.alert(document.getElementById("alertMessageContent").value);}
				function cancelEdit(url){if(confirm("Tem certeza que deseja cancelar as alterações?")){location.href=url;}}

				function submitFormEditProfile(){
					var form=document.getElementById("f_editProfile");
					if(form["name"].value==""){bootbox.alert("Por favor, informe o nome.");return;}
					if(form["lastName"].value==""){bootbox.alert("Por favor, informe o sobrenome.");return;}
					var dtBirthDay=form["dtBirthDay"].value;
					var dtBirthMonth=form["dtBirthMonth"].value;
					var dtBirthYear=form["dtBirthYear"].value;
					if(!validateDate(dtBirthDay,dtBirthMonth,dtBirthYear)){
						bootbox.alert("A data de nascimento informada é inválida.");
						return;
					}
					if(dtBirthDay!="-1"&&dtBirthMonth!="-1"&&dtBirthYear!="-1"){
						dtBirthMonth=parseInt(dtBirthMonth)+1;
						form["dtBirthStr"].value=dtBirthDay+"/"+dtBirthMonth+"/"+dtBirthYear;
					}
					form.submit();
				}
				
				function validateDate(day,month,year){
					if((day!="-1"||month!="-1")&&year=="-1"){return false;}
					if((day!="-1"||year!="-1")&&month=="-1"){return false;}
					if((month!="-1"||year!="-1")&&day=="-1"){return false;}
					if(month==1){if(day<1||day>29){return false;}}
					else if(month==3||month==5||month==8||month==10){if(day<1||day>30){return false;}}
					else if(month==0||month==2||month==4||month==6||month==7||month==9||month==11){if(day<1||day>31){return false;}}
					return true;
				}
			/*]]>*/
		</script>

	</div>

</body>
</html>